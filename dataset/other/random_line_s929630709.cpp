    return f.rewrite ? S{f.f,x.weight} : x;
