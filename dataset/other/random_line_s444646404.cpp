            if (new_w < 0 || new_w >= w)
