        res += (n / b) * (b - 1 - k + 1) + max((long long int)0, n % b - k + 1);
