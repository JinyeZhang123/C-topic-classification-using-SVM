                chmax(diff.at(i), curO - curE);
