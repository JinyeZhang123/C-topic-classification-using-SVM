    cost += A * max(0ll, X - i / 2ll);  // 0以下にならないようにAも買う
