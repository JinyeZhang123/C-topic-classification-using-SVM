      if(nx < 0 || nx >= W || ny < 0 || ny >= H) break;
