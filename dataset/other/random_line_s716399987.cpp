    if ((b - base + period) % period <= w) {
