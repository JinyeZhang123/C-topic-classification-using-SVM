  if (S.size() == 3) swap(S.at(0), S.at(2));
