        if (0 <= x_new && x_new < w && 0 <= y_new && y_new < h) {
