    if (res == N && x) --res;
