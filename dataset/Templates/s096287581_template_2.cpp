template<typename T>
static inline void chmax(T & ref, const T value) {
    if (ref < value) ref = value;
}